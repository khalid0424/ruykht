import telebot
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton
import psycopg2
from telebot import apihelper

TOKEN = '8097727230:AAFBgM2pLcfE_-ZuHZmpP3Zv30D-M-8Pi1M'
bot = telebot.TeleBot(TOKEN)

conn = psycopg2.connect(
    host="localhost",
    database="khatt",
    user="postgres",
    password="Khalid2004"
)
cursor = conn.cursor()

user_data = {}

def send_message_to_user(chat_id, message_text, reply_markup=None):
    try:
        bot.send_message(chat_id, message_text, reply_markup=reply_markup)
    except apihelper.ApiTelegramException as e:
        if e.result_json['description'] == 'Forbidden: bot was blocked by the user':
            print(f"–ö–æ—Ä–±–∞—Ä {chat_id} –±–æ—Ç—Ä–æ –±–ª–æ–∫ –∫–∞—Ä–¥–∞–∞—Å—Ç.")
        else:
            print(f"–•–∞—Ç–æ–∏ –¥–∏–≥–∞—Ä —Ä—É—Ö –¥–æ–¥: {e}")

@bot.message_handler(commands=['start'])
def start(message):
    user_data[message.chat.id] = {}
    
    markup = InlineKeyboardMarkup()
    markup.row_width = 2
    markup.add(InlineKeyboardButton("TECNOTOJ", url="https://t.me/tecnotoj04"),
               InlineKeyboardButton("QALB.SHOP", url="https://t.me/qalbb04"))
    
    send_message_to_user(message.chat.id, f"–°–∞–ª–æ–º, {message.from_user.first_name}!\n\n\n"
                                    "‚ö†Ô∏è–•–ê–ë–ê–†–ò –§–ê–í–†”¢‚ö†Ô∏è!\n\n"

"                                   –ë–∞ –¥–∏“õ“õ–∞—Ç–∏ —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω–∏ “∂—É–º“≥—É—Ä–∏–∏ –¢–æ“∑–∏–∫–∏—Å—Ç–æ–Ω —Ä–∞—Å–æ–Ω–∏–¥–∞ –º–µ—à–∞–≤–∞–¥, –∫–∏  –±–∞ “õ–æ–Ω—É–Ω“≥–æ–∏ —Ñ–µ–¥–µ—Ä–∞–ª”£ –æ–∏–¥ –±–∞ –±—É–¥—É–±–æ—à–∏ —à–∞“≥—Ä–≤–∞–¥–æ–Ω–∏ —Ö–æ—Ä–∏“∑”£ –¥–∞—Ä –§–µ–¥–µ—Ä–∞—Ç—Å–∏—è–∏ –†–æ—Å—Å–∏—è —Ç–∞“ì–π–∏—Ä—É –∏–ª–æ–≤–∞“≥–æ –≤–æ—Ä–∏–¥ –≥–∞—Ä–¥–∏–¥–∞, –∞–∑ 5 —Ñ–µ–≤—Ä–∞–ª–∏ —Å–æ–ª–∏ 2025 —ç—ä—Ç–∏–±–æ—Ä–∏ “õ–æ–Ω—É–Ω”£  –ø–∞–π–¥–æ –º–µ–∫—É–Ω–∞–Ω–¥. –í–∞–∑–æ—Ä–∞—Ç–∏ –∫–æ—Ä“≥–æ–∏ –¥–æ—Ö–∏–ª–∏–∏ –§–µ–¥–µ—Ä–∞—Ç—Å–∏—è–∏ –†–æ—Å—Å–∏—è(–§–†) –Ω–∏–∑–æ–º–∏ –º–∞—Ö—Å—É—Å–∏ –∏—Ö—Ä–æ“∑ (–¥–µ–ø–æ—Ä—Ç–∞—Ç—Å–∏—è)-—Ä–æ “∑–æ—Ä”£ –Ω–∞–º—É–¥–∞, –±–∞ ‚Äú—Ä”Ø–π—Ö–∞—Ç–∏ —à–∞—Ö—Å–æ–Ω–∏ –Ω–∞–∑–æ—Ä–∞—Ç—à–∞–≤–∞–Ω–¥–∞‚Äù –∑–∏—ë–¥–∞ –∞–∑ 120 “≥–∞–∑–æ—Ä —à–∞“≥—Ä–≤–∞–Ω–¥–∏ “∂—É–º“≥—É—Ä–∏–∏ –¢–æ“∑–∏–∫–∏—Å—Ç–æ–Ω “≥–∞–º—á—É–Ω “õ–æ–Ω—É–Ω–≤–∞–π—Ä–æ–Ω–∫—É–Ω–∞–Ω–¥–∞ –±–∞ “õ–∞–π–¥ –≥–∏—Ä–∏—Ñ—Ç–∞ —à—É–¥–∞–∞–Ω–¥. \n\n"


                                    " –®–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω–µ, –∫–∏ –¥–∞—Ä —Ä”Ø–π—Ö–∞—Ç “õ–∞—Ä–æ—Ä –¥–æ—Ä–∞–Ω–¥, –±–æ—è–¥ —Ö—É–¥—Ä–æ —Ç–æ 5 —Ñ–µ–≤—Ä–∞–ª–∏ —Å–æ–ª–∏ 2025 –±–∞ –º–∞“õ–æ–º–æ—Ç–∏ –¥–∞—Ö–ª–¥–æ—Ä–∏ –º—É“≥–æ“∑–∏—Ä–∞—Ç–∏ –§–† –º—É—Ä–æ“∑–∏–∞—Ç –Ω–∞–º—É–¥–∞, –±–∞ “õ–∞–π–¥–∏ “õ–æ–Ω—É–Ω”£ –≥–∏—Ä–∞–Ω–¥ —ë “õ–∞–ª–∞–º—Ä–∞–≤–∏ –∏–Ω –¥–∞–≤–ª–∞—Ç—Ä–æ —Ç–∞—Ä–∫ –Ω–∞–º–æ—è–Ω–¥. –î–∞—Ä —Å—É—Ä–∞—Ç–∏ –¥–∞—Ä –º—É“≥–ª–∞—Ç–∏ –º—É–∞–π—è–Ω—à—É–¥–∞ –±–∞ “õ–∞–π–¥–∏ “õ–æ–Ω—É–Ω”£ –Ω–∞–≥–∏—Ä–∏—Ñ—Ç–∞–Ω —à–∞“≥—Ä–≤–∞–Ω–¥ –±–æ —Ç–∞–≤—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç”£ –±–∞ —Ä”Ø–π—Ö–∞—Ç–∏ —à–∞—Ö—Å–æ–Ω–∏ –∏—Ö—Ä–æ“∑—à–∞–≤–∞–Ω–¥–∞(–¥–µ–ø–æ—Ä—Ç–∞—Ç—Å–∏—è) –≤–æ—Ä–∏–¥ –≥–∞—Ä–¥–∏–¥–∞, “≥—É“õ—É“õ–∏ —Ä–∞—Ñ—Ç–∞–Ω –±–∞ –∏–Ω –¥–∞–≤–ª–∞—Ç—Ä–æ –∞–∑ –¥–∞—Å—Ç –º–µ–¥–∏“≥–∞–Ω–¥.\n"


                                    "–ê–≥–∞—Ä —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω–µ, –∫–∏ –¥–∞—Ä  —Ä—É–π—Ö–∞—Ç–∏ –º–∞–∑–∫—É—Ä “õ–∞—Ä–æ—Ä –¥–æ—à—Ç–∞ –±–æ—à–∞–Ω–¥ –≤–∞ –§–†-—Ä–æ –±–æ —Ö–æ“≥–∏—à–∏ —Ö—É–¥ —Ç–∞—Ä–∫ –∫–∞—Ä–¥–∞–∞–Ω–¥, –∏—Ö—Ä–æ“∑(–¥–µ–ø–æ—Ä—Ç–∞—Ç—Å–∏—è) —à—É–¥–∞–∞–Ω–¥ —ë –¥–∞—Ä “õ–∞–ª–∞–º—Ä–∞–≤–∏ –¢–æ“∑–∏–∫–∏—Å—Ç–æ–Ω —ë –¥–∏–≥–∞—Ä –¥–∞–≤–ª–∞—Ç “õ–∞—Ä–æ—Ä –¥–æ—à—Ç–∞ –±–æ—à–∞–Ω–¥, –Ω—É—Å—Ö–∞–∏ —à–∏–Ω–æ—Å–Ω–æ–º–∞–∏ —Ö–æ—Ä–∏“∑–∏–∏ —Ö—É–¥—Ä–æ –±–æ –Ω–∏—à–æ–Ω –¥–æ–¥–∞–Ω–∏ –º—É“≥—Ä–∏ —É–±—É—Ä–∏ —Å–∞—Ä“≥–∞–¥ –±–æ –º–∞“õ—Å–∞–¥–∏ –∞–∑ —Ä”Ø–π—Ö–∞—Ç–∏ –º–∞–∑–∫—É—Ä –±–∞—Ä–æ–≤–∞—Ä–¥–∞–Ω –±–∞ –º–∞“õ–æ–º–æ—Ç–∏ –º—É“≥–æ“∑–∏—Ä–∞—Ç–∏ “∑–æ–π–∏ –∑–∏—Å—Ç–∏ —Ö—É–¥ –¥–∞—Ä —à–∞“≥—Ä—É –Ω–æ“≥–∏—è“≥–æ–∏ “∑—É–º“≥—É—Ä”£ –ø–µ—à–Ω–∏“≥–æ–¥  –Ω–∞–º–æ—è–Ω–¥.\n"


                                    "–ê–≥–∞—Ä —à—É–º–æ –¥–æ—Ä–æ–∏ –¥—É—à–∞“≥—Ä–≤–∞–Ω–¥”£ “∂—É–º“≥—É—Ä–∏–∏ –¢–æ“∑–∏–∫–∏—Å—Ç–æ–Ω –≤–∞ –§–µ–¥–µ—Ä–∞—Ç—Å–∏—è–∏ –†–æ—Å—Å–∏—è –±–æ—à–µ–¥ —ë “õ–æ–Ω—É–Ω”£ —Ñ–∞—ä–æ–ª–∏—è—Ç–∏ –º–µ“≥–Ω–∞—Ç–∏ –º–µ–Ω–∞–º–æ–µ–¥ –≤–∞ –¥–∞—Ä —Ä”Ø–π—Ö–∞—Ç “õ–∞—Ä–æ—Ä –¥–æ—Ä–µ–¥, “≥–∞—Ç–º–∞–Ω –Ω—É—Å—Ö–∞–∏ —à–∏–Ω–æ—Å–Ω–æ–º–∞–∏ —Ö—É–¥—Ä–æ –±–∞ –ù–∞–º–æ—è–Ω–¥–∞–≥–∏–∏ –í–∞–∑–æ—Ä–∞—Ç –¥–∞—Ä –§–† –æ–∏–¥ –±–∞ –º—É“≥–æ“∑–∏—Ä–∞—Ç –ø–µ—à–Ω–∏“≥–æ–¥ –Ω–∞–º–æ–µ–¥.\n "


                                    "–®–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω–µ, –∫–∏ –¥–∞—Ä “õ–∞–ª–∞–º—Ä–∞–≤–∏ –§–† “õ–∞—Ä–æ—Ä –¥–æ—Ä–∞–Ω–¥, –º–µ—Ç–∞–≤–æ–Ω–∞–Ω–¥ –±–∞ –ù–∞–º–æ—è–Ω–¥–∞–≥–∏–∏ –í–∞–∑–æ—Ä–∞—Ç–∏ –º–µ“≥–Ω–∞—Ç, –º—É“≥–æ“∑–∏—Ä–∞—Ç –≤–∞ —à—É“ì–ª–∏ –∞“≥–æ–ª”£ –¥–∞—Ä –§–† –æ–∏–¥ –±–∞ –º—É“≥–æ“∑–∏—Ä–∞—Ç —Ç–∞–≤–∞—Å—Å—É—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω“≥–æ–∏ –¥–∞—Ä –∑–µ—Ä –Ω–∏—à–æ–Ω –¥–æ–¥–∞ —à—É–¥–∞, –º—É—Ä–æ“∑–∏–∞—Ç –Ω–∞–º–æ—è–Ω–¥."
                                    "–ë–∞—Ä–æ–∏ –º—É–∞–π—è–Ω –Ω–∞–º—É–¥–∞–Ω–∏ –≤–∞–∑—ä–∏ “≥—É“õ—É“õ–∏–∏ —Ö—É–¥ –∞–∑ —Å–æ–º–æ–Ω–∞“≥–æ–∏ —Ä–∞—Å–º–∏–∏ –í–∞–∑–æ—Ä–∞—Ç–∏ –º–µ“≥–Ω–∞—Ç, –º—É“≥–æ“∑–∏—Ä–∞—Ç –≤–∞ —à—É“ì–ª–∏ –∞“≥–æ–ª–∏–∏ “∂—É–º“≥—É—Ä–∏–∏ –¢–æ“∑–∏–∫–∏—Å—Ç–æ–Ω mehnat,tj, —Å–∞“≥–∏—Ñ–∞–∏ —Ç–µ–ª–µ–≥—Ä–∞–º t,me/mlmert, –•–∞–¥–∞–º–æ—Ç–∏ –º—É“≥–æ“∑–∏—Ä–∞—Ç migration,tj, –ù–∞–º–æ—è–Ω–¥–∞–≥–∏–∏ –í–∞–∑–æ—Ä–∞—Ç –¥–∞—Ä –§–† –æ–∏–¥ –±–∞ –º—É“≥–æ“∑–∏—Ä–∞—Ç tajmigration,ru –≤–∞ –í–∞–∑–æ—Ä–∞—Ç–∏ –∫–æ—Ä“≥–æ–∏ –¥–æ—Ö–∏–ª–∏–∏ “∂—É–º“≥—É—Ä–∏–∏ –¢–æ“∑–∏–∫–∏—Å—Ç–æ–Ω vkd,tj –∏—Å—Ç–∏—Ñ–æ–¥–∞ –Ω–∞–º–æ–µ–¥.\n"
                                    "üëáüëáüëáüëáüëáüëáüëáüëá\n"
                                    "\n"
                                    "–ë–∞—Ä–æ–∏ –∏—Å—Ç–∏—Ñ–æ–¥–∞–∏ –±–æ—Ç, –ª—É—Ç—Ñ–∞–Ω –±–∞ –∫–∞–Ω–∞–ª“≥–æ–∏ –∑–µ—Ä–∏–Ω –æ–±—É–Ω–∞ —à–∞–≤–µ–¥:\n"
                                    "üëáüëáüëáüëáüëáüëáüëáüëá\n"
                                    "üõú ‚úÖ - üõú ‚úÖ - üõú ‚úÖ - üõú ‚úÖ", 
                         reply_markup=markup)
    
    check_subscription_button = InlineKeyboardMarkup()
    check_subscription_button.add(InlineKeyboardButton("–û–±—É–Ω–∞ —à—É–¥–∞–º", callback_data="check_subscription"))
    
    send_message_to_user(message.chat.id, "–ü–∞—Å –∞–∑ –æ–±—É–Ω–∞ —à—É–¥–∞–Ω, —Ç—É–≥–º–∞–∏ '–û–±—É–Ω–∞ —à—É–¥–∞–º'-—Ä–æ –ø–∞—Ö—à –∫—É–Ω–µ–¥:", 
                         reply_markup=check_subscription_button)

def is_subscribed(user_id):
    channels = ['@tecnotoj04', '@qalbb04']
    
    for channel in channels:
        try:
            member_status = bot.get_chat_member(channel, user_id).status
            if member_status not in ['member', 'administrator', 'creator']:
                return False
        except Exception as e:
            print(f"Error checking subscription for {channel}: {e}")
            return False
    
    return True

@bot.callback_query_handler(func=lambda call: call.data == "check_subscription")
def continue_process(call):
    if is_subscribed(call.message.chat.id):
        send_message_to_user(call.message.chat.id, "–û–±—É–Ω–∞ —Å–∞–Ω“∑–∏–¥–∞ —à—É–¥!\n‚úÖÔ∏è‚úÖÔ∏è‚úÖÔ∏è‚úÖÔ∏è‚úÖÔ∏è‚úÖÔ∏è\n –õ—É—Ç—Ñ–∞–Ω –≤–∏–ª–æ—è—Ç–∏ —Ö—É–¥—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥:\n")

        region_markup = InlineKeyboardMarkup()
        region_markup.row_width = 1
        region_markup.add(InlineKeyboardButton("–†”Ø–π—Ö–∞—Ç–∏ —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω –∞–∑ –í–ú–ö–ë", callback_data="vmkb"),
                          InlineKeyboardButton("–†”Ø–π—Ö–∞—Ç–∏ —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω –∞–∑ —à.–î—É—à–∞–Ω–±–µ", callback_data="dushanbe"),
                          InlineKeyboardButton("–†”Ø–π—Ö–∞—Ç–∏ —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω –∞–∑ –≤.–•–∞—Ç–ª–æ–Ω", callback_data="hatlon"),
                          InlineKeyboardButton("–†”Ø–π—Ö–∞—Ç–∏ —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω –∞–∑ –≤.–°—É“ì–¥", callback_data="sugd"),
                          InlineKeyboardButton("–†”Ø–π—Ö–∞—Ç–∏ —à–∞“≥—Ä–≤–∞–Ω–¥–æ–Ω –∞–∑ –®–ù–¢“∂", callback_data="tobe"))
        
        send_message_to_user(call.message.chat.id, "–ò–ù–¢–ò–•–û–ë –ö–£–ù–ï–î:\n‚ÜòÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚ÜôÔ∏è", reply_markup=region_markup)
    else:
        send_message_to_user(call.message.chat.id, "–®—É–º–æ –±–∞ –∫–∞–Ω–∞–ª“≥–æ –æ–±—É–Ω–∞ –Ω–∞—à—É–¥–∞–µ–¥.\n‚ùå‚ùå‚ùå‚ùå‚ùå\n –õ—É—Ç—Ñ–∞–Ω –∞–≤–≤–∞–ª –æ–±—É–Ω–∞ —à–∞–≤–µ–¥!")

@bot.callback_query_handler(func=lambda call: call.data in ["vmkb", "dushanbe", "hatlon", "sugd", "tobe"])
def region_selection(call):
    chat_id = call.message.chat.id

    if chat_id in user_data and "region" not in user_data[chat_id]:
        region_map = {
            "vmkb": "–í–ú–ö–ë",
            "dushanbe": "—à.–î—É—à–∞–Ω–±–µ",
            "hatlon": "–≤.–•–∞—Ç–ª–æ–Ω",
            "sugd": "–≤.–°—É“ì–¥",
            "tobe": "–®–ù–¢“∂"
        }
        
        user_data[chat_id]["region"] = region_map[call.data]
        send_message_to_user(chat_id, f"–®—É–º–æ –≤–∏–ª–æ—è—Ç–∏ {region_map[call.data]}-—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫–∞—Ä–¥–µ–¥.\n\n"
                                   f"–õ—É—Ç—Ñ–∞–Ω –Ω–æ–º –≤–∞ –Ω–∞—Å–∞–± –≤–∞ —Å–∞–Ω–∞–∏ —Ç–∞–≤–∞–ª—É–¥–∏ \n\n —Ö—É–¥—Ä–æ “≥–∞–º—á—É–Ω —à–∏–Ω–æ—Å–Ω–æ–º–∞ –≤–æ—Ä–∏–¥ –∫—É–Ω–µ–¥ –º–∏—Å–æ–ª:\n\n\n‚úÖÔ∏è‚úÖÔ∏è‚úÖÔ∏è  –°–æ–ª–µ“≥–∑–æ–¥–∞ –®–æ“≥–±–µ–≥—Ö—É“∑–∞ –ê–±–¥—É–ª–ª–æ , 24.08.2004  ‚úÖÔ∏è‚úÖÔ∏è‚úÖÔ∏è\n\n\n (–±–µ —Ö–∞—Ç–æ–≥”£):\n <,>–≤–µ—Ä–≥—É–ª –º–æ–Ω–¥–∞–Ω –º–æ–±–∞–π–Ω–∏ –Ω–æ–º –≤–∞ \n —Å–∞–Ω–∞–∏ —Ç–∞–≤–∞–ª—É–¥ —Ñ–∞—Ä–æ–º—É—à –Ω–∞—à–∞–≤–∞–¥")
    else:
        send_message_to_user(chat_id, "–ú–∞—ä–∑—Ä–∞—Ç, –∞—Å–ª–∏–∏ –º–∞–Ω–∑–∏–ª –º–∞–≤“∑—É–¥ –Ω–µ—Å—Ç.")

@bot.message_handler(func=lambda message: "region" in user_data.get(message.chat.id, {}))
def receive_name(message):
    chat_id = message.chat.id

    if chat_id in user_data:
        user_data[chat_id]["name"] = message.text.strip()

        cursor.execute("SELECT name, address, nohiya FROM users WHERE similarity(name, %s) > 0.7", (user_data[chat_id]["name"],))
        result = cursor.fetchone()

        if result:
            send_message_to_user(chat_id, f"–ú–∞—ä–ª—É–º–æ—Ç —ë—Ñ—Ç —à—É–¥: {result[0]} {result[1]} ({result[2]})\n\n\n"
                                          "üî¥–®—É–º–æ –¥–∞—Ä —Ä”Ø–π—Ö–∞—Ç “≥–∞—Å—Ç–µ–¥.üî¥")
            send_message_to_user(chat_id, f"–î–ò“ö–ê–¢–¢:—ç“≥—Ç–∏–º–æ–ª–∏ —Ö–∞—Ç–æ –∫–∞—Ä–¥–∞–Ω–∏ –±–æ—Ç “≥–∞—Å—Ç.\n“∂–∞–¥–≤–∞–ª“≥–æ–∏ —Ä—É–π—Ö–∞—Ç—Ä–æ –º–µ—Ç–∞–≤–æ–Ω–µ–¥ –¥–∞ –∏–Ω –∫–∞–Ω–∞–ª –ø–∞–π–¥–æ –∫—É–Ω–µ–¥,\n‚ÜòÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚ÜôÔ∏è\nhttps://t.me/tecnotoj04")                              
        else:
            send_message_to_user(chat_id, "üü¢–®—É–º–æ –¥–∞—Ä —Ä”Ø–π—Ö–∞—Ç –Ω–µ—Å—Ç–µ–¥.üü¢")
            send_message_to_user(chat_id, f"–î–ò“ö–ê–¢–¢:—ç“≥—Ç–∏–º–æ–ª–∏ —Ö–∞—Ç–æ –∫–∞—Ä–¥–∞–Ω–∏ –±–æ—Ç “≥–∞—Å—Ç\n“∂–∞–¥–≤–∞–ª“≥–æ–∏ —Ä—É–π—Ö–∞—Ç—Ä–æ –º–µ—Ç–∞–≤–æ–Ω–µ–¥ –¥–∞ –∏–Ω –∫–∞–Ω–∞–ª –ø–∞–π–¥–æ –∫—É–Ω–µ–¥,\n‚ÜòÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚ÜôÔ∏è\nhttps://t.me/tecnotoj04")                              
        
        search_again_markup = InlineKeyboardMarkup()
        search_again_markup.add(InlineKeyboardButton("–î—É–±–æ—Ä–∞ —Å–∞–Ω“∑–∏–¥–∞–Ω", callback_data="search_again"))
        send_message_to_user(chat_id, "‚ö†Ô∏è–•–ê–ú–í–ê–¢–ê–ù–•–û–ò –ì–ò–†–û–ú–ò!‚ö†Ô∏è\n"

                                      "1- –ê–ì–ê–† –Ø–ì–û–ù –ö–ê–° –ì–£–Ø–î –ú–ê–ù –ö–£–ú–ê–ö –ú–ï–ö–£–ù–ê–ú –ë–ê–†–û–ò –ê–ó –ò–ù –°–ü–ò–°–û–ö –¢–û–ó–ê –ö–ê–†–î–ê–ù–ò –ù–û–ú–ê–¢–û–ù –ë–û–í–ê–† –ù–ê–ö–£–ù–ï–î!!\n"
                                      "–î–£–†–£–ì –ê–°–¢!\n"
                                      "–ë–ê –Ø–ì–û–ù –ö–ê–° –Ø–ì–û–ù –¢–ò–ù –ù–ê–ü–ê–†–¢–û–ï–î!\n\n"

                                      "–ë–ê–™–ó–ï –ú–û–®–ï–ù–ò–ö–•–û –ê–ó –ú–û–ú–ï–ù–¢ –ò–°–¢–ò–§–û–î–ê –ö–ê–†–î–ê –•–ê–†–•–ï–õ –ë–û–¢ –í–ê –°–ê–ô–¢–•–û –°–û–•–¢–ï–°–¢–ê–ù, –ö–ò –ò–ù–ß–û –î–ê–†–û –ù–û–ú–ê–¢–†–û –°–ê–ù–ß –ì–£–§–¢–ê –ü–ï–®–ù–ò–•–û–î –ú–ï–ö–£–ù–ê–ù–î –≠–•–¢–ò–Å–¢ –®–ê–í–ï–î!\n\n"
     
                                      "–Ø–ì–û–ù–•–ï–õ –°–°–´–õ–ö–ê–•–û –ë–û–®–ê–î –ù–ê–î–ê–†–û–ï–î, –ö–ò –ú–ê–ë–õ–ê–ì–•–û–Ø–¢–û–ù –ê–í–¢–û–ú–ê–¢–ò –ê–ó –ö–ê–†–¢–ê–•–û–Ø–¢–û–ù –°–ù–ò–ú–ê–¢–¨ –ú–ï–®–ê–í–ê–î!\n\n"

                                      "–ê–õ–õ–ê–ö–ê–ô –ë–ê –ú–ê–™–õ–£–ú–û–¢–ò –ú–ê–ù –§–ò–†–ï–ë–•–£–†–î–ê–ì–ò–•–û –•–ê–°–¢–ê–ù–î! \n\n"
                                      "–ê–≥–∞—Ä –º–µ—Ö–æ“≥–µ–¥ –¥—É–±–æ—Ä–∞ —Å–∞–Ω“∑–µ–¥, —Ç—É–≥–º–∞–∏ '–î—É–±–æ—Ä–∞ —Å–∞–Ω“∑–∏–¥–∞–Ω'-—Ä–æ –ø–∞—Ö—à –∫—É–Ω–µ–¥:", 
                             reply_markup=search_again_markup)

@bot.callback_query_handler(func=lambda call: call.data == "search_again")
def search_again(call):
    send_message_to_user(call.message.chat.id, "–õ—É—Ç—Ñ–∞–Ω –Ω–æ–º –≤–∞ –Ω–∞—Å–∞–±–∏ —Ö—É–¥—Ä–æ –¥—É–±–æ—Ä–∞ –≤–æ—Ä–∏–¥ –∫—É–Ω–µ–¥:\n‚ÜòÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è‚ÜôÔ∏è")

bot.polling(non_stop=True, interval=0, timeout=60, long_polling_timeout=60)
